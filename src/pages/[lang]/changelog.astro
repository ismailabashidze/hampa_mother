---
// Components
// - Layout
import Layout from '../../layouts/Layout.astro'
// - UI
import Hero from '../../components/blocks/hero/PageHeader.astro'
import SimpleFeed from '../../components/blocks/feeds/BasicFeed.astro'
import CTA from '../../components/blocks/CTA/BasicLight.astro'

// Data
import feedData from '../../data/json-files/changelogData.json'

// Content
// - i18n
import { isValidLanguage, defaultLanguage } from '../../config/i18n'

// Get language from URL params
const { lang } = Astro.params

// Validate language parameter
if (!lang || !isValidLanguage(lang)) {
	return Astro.redirect(`/${defaultLanguage}/changelog`)
}

// - SEO
const SEO = (() => {
	if (lang === 'en') {
		return {
			title: 'MamaTogether | Platform Updates and Improvements',
			description:
				"Stay informed about all the new updates and improvements in HamPay‑e Madar, our AI + psychologist platform for mothers."
		}
	}
	return {
		title: 'Foxi | Version Updates and Improvements',
		description:
			"Explore Foxi's powerful features designed to enhance productivity, ensure top-notch security, and integrate seamlessly with your favorite tools. Join thousands of satisfied users and transform your workflow with Foxi today!"
	}
})()
// - Page Header
const header = (() => {
	if (lang === 'en') {
		return {
			title: 'HamPay‑e Madar Updates and <strong>Enhancements</strong>',
			text: 'Stay informed about all the new updates and improvements in our parenting support platform.'
		}
	}
	return {
		title: 'Foxi Version Updates and <strong>Enhancements</strong>',
		text: 'Stay informed about all the new updates and improvements in Foxi.'
	}
})()

export async function getStaticPaths() {
	return [
		{ params: { lang: 'en' } },
		{ params: { lang: 'fa' } }
	]
}
---

<Layout title={SEO.title} description={SEO.description} lang={lang}>
	<Hero title={header.title} text={header.text} />
	<SimpleFeed data={feedData} />
	<CTA />
</Layout>