---
// Components
// - Layout
import Layout from '../../layouts/Layout.astro'
// - UI
import Hero from '../../components/blocks/hero/PageHeader.astro'
import Price from '../../components/blocks/pricing/PricingColumns.astro'
import SocialProof from '../../components/blocks/socialproof/Basic.astro'
import FAQ from '../../components/blocks/FAQ/Basic.astro'
import Testimonial from '../../components/blocks/testimonials/BasicDark.astro'
import Feature from '../../components/blocks/features/FeatureList.astro'
import CTA from '../../components/blocks/CTA/BasicDark.astro'

// Content
// - i18n
import { isValidLanguage, defaultLanguage } from '../../config/i18n'

// Get language from URL params
const { lang } = Astro.params

// Validate language parameter
if (!lang || !isValidLanguage(lang)) {
	return Astro.redirect(`/${defaultLanguage}/pricing`)
}

// - SEO
const SEO = (() => {
	if (lang === 'fa') {
		return {
			title: 'هم‌پای مادر | قیمت‌گذاری ساده برای مادران',
			description:
				'طرح مناسب برای نیازهای فرزندپروری خود را انتخاب کنید. از مبانی رایگان تا مشاوره‌های روانشناس پرمیوم، حمایت مقرون‌به‌صرفه برای سفر خود پیدا کنید.'
		}
	}
	return {
		title: 'MamaTogether | Simple Pricing for Mothers',
		description:
			'Choose the perfect plan for your parenting needs. From free basics to premium psychologist consultations, find affordable support for your journey.'
	}
})()
// - Page Header
const header = (() => {
	if (lang === 'fa') {
		return {
			title: 'طرحی را انتخاب کنید که برای <strong>خانواده شما</strong> مناسب است',
			text: 'همه طرح‌ها با ضمانت ۳۰ روزه بازگشت پول ارائه می‌شوند.'
		}
	}
	return {
		title: 'Choose the plan that works for <strong>your family</strong>',
		text: 'All plans come with a 30-day money-back guarantee.'
	}
})()
// - Testimonial data
import testimonialBackground from '../../assets/testimonial-bg-02.webp'
const testimonialData = (() => {
	if (lang === 'fa') {
		return {
			blockquote:
				"هم‌پای مادر فقط یک اپلیکیشن نیست—مثل داشتن یک مربی دانا فرزندپروری است که ۲۴/۷ در دسترس باشد. هوش مصنوعی پاسخ‌های سریع می‌دهد و نظارت روانشناس به من اطمینان می‌دهد.",
			figcaption: 'سارا م.',
			cite: ' مادر ۲ فرزند، تهران'
		}
	}
	return {
		blockquote:
			"MamaTogether isn't just an app—it's like having a wise parenting mentor available 24/7. The AI gives quick answers, and the psychologist oversight gives me confidence.",
		figcaption: 'Sara M.',
		cite: ' Mother of 2, Tehran'
	}
})()

export async function getStaticPaths() {
	return [
		{ params: { lang: 'en' } },
		{ params: { lang: 'fa' } }
	]
}
---

<Layout title={SEO.title} description={SEO.description} lang={lang}>
	<Hero title={header.title} text={header.text} />
	<Price lang={lang} />
	<SocialProof />
	<Feature lang={lang} />
	<Testimonial
		bg={testimonialBackground}
		bgPosition="left"
		blockquote={testimonialData.blockquote}
		figcaption={testimonialData.figcaption}
		cite={testimonialData.cite}
		lang={lang}
	/>
	<FAQ classes="bg-slate-50 dark:bg-neutral-900/40" lang={lang} />
	<CTA lang={lang} />
</Layout>