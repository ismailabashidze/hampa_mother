---
// Blog Index Page (localized)
import Layout from '../../../layouts/Layout.astro'
import Hero from '../../../components/blocks/hero/PageHeader.astro'
import BlogPosts from '../../../components/blocks/blog/BlogPosts.astro'
import { getCollection } from 'astro:content'
import { isValidLanguage, defaultLanguage } from '../../../config/i18n'

const { lang } = Astro.params
if (!lang || !isValidLanguage(lang)) {
  return Astro.redirect(`/${defaultLanguage}/blog`)
}

const SEO = {
  title: 'Foxi | Latest Foxi News and updates',
  description:
    "Explore Foxi's latest news designed to enhance productivity, ensure top-notch security, and integrate seamlessly with your favorite tools. Join thousands of satisfied users and transform your workflow with Foxi today!",
}

const header = {
  title: 'The <strong>Foxi</strong> Blog. Tips, Updates & Stories',
  text: 'Stay informed, stay productive. All the latest from the world of Foxi.',
}

const allPosts = await getCollection('blog')

export async function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'fa' } }]
}
---

<Layout title={SEO.title} description={SEO.description} lang={lang}>
  <Hero title={header.title} text={header.text} />
  <BlogPosts data={allPosts} />
  <slot />
</Layout>


