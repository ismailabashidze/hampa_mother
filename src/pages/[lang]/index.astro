---
// Components
// - Layout
import Layout from '../../layouts/Layout.astro'
// - UI
import Hero from '../../components/blocks/hero/HomeCTA.astro'
import Features from '../../components/blocks/features/FeatureCards.astro'
import Testimonial from '../../components/blocks/testimonials/BasicDark.astro'
import HighlightBlocks from '../../components/blocks/highlights/HightlightRows.astro'
import Pricing from '../../components/blocks/pricing/PricingColumns.astro'
import CTA from '../../components/blocks/CTA/BasicDark.astro'

// Content
// - Testimonial background
import testimonialBackground from '../../assets/testimonial-bg-01.webp'
// - i18n
import { isValidLanguage, defaultLanguage } from '../../config/i18n'

// Get language from URL params
const { lang } = Astro.params

// Validate language parameter
if (!lang || !isValidLanguage(lang)) {
	return Astro.redirect(`/${defaultLanguage}/`)
}

// SEO – language-aware
const SEO = (() => {
    if (lang === 'fa') {
        return {
            title: 'هم‌پای مادر | پشتیبانی هوشمند برای مادران',
            description:
                'هم‌پای مادر سکوی ترکیبی است که هوش مصنوعی ۲۴/۷ را با نظارت روانشناس کودک ترکیب می‌کند تا از مادران در چالش‌های روزمره فرزندپروری با فعالیت‌های هوشمند، آموزش و غربالگری اولیه حمایت کند.'
        }
    }
    return {
        title: 'MamaTogether | Smart Support for Mothers',
        description:
            'MamaTogether is a hybrid platform that combines 24/7 AI guidance with oversight from child psychologists to support mothers in daily parenting challenges with smart activities, education, and early screening.'
    }
})()

export async function getStaticPaths() {
	return [
		{ params: { lang: 'en' } },
		{ params: { lang: 'fa' } }
	]
}
---

<Layout title={SEO.title} description={SEO.description} lang={lang}>
	<Hero lang={lang} />
	<Features lang={lang} />
	<Testimonial bg={testimonialBackground} bgPosition="right" lang={lang} />
	<HighlightBlocks lang={lang} />
	<Pricing lang={lang} />
	<CTA lang={lang} />
</Layout>