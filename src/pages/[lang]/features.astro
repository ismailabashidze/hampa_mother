---
// Components
// - Layout
import Layout from '../../layouts/Layout.astro'
// - UI
import Hero from '../../components/blocks/hero/PageHeader.astro'
import CTA from '../../components/blocks/CTA/BasicDark.astro'
import Section from '../../components/ui/Section.astro'
import Row from '../../components/ui/Row.astro'
import Col from '../../components/ui/Col.astro'
import { Icon } from 'astro-icon/components'

// i18n
import { isValidLanguage, defaultLanguage } from '../../config/i18n'

// Get language from URL params
const { lang } = Astro.params

// Validate language parameter
if (!lang || !isValidLanguage(lang)) {
	return Astro.redirect(`/${defaultLanguage}/features`)
}

// Content
const content = {
	fa: {
		seo: {
			title: 'هم‌پای مادر | امکانات ترکیبی هوش مصنوعی و روانشناسی انسانی برای مادران',
			description: 'کشف کنید که چگونه هم‌پای مادر راهنمایی ۲۴/۷ هوش مصنوعی را با نظارت روانشناس کودک ترکیب می‌کند تا از مادران در چالش‌های روزانه فرزندپروری حمایت کند.'
		},
		hero: {
			title: 'امکانات <strong>هوشمند</strong> برای مادران مدرن',
			text: 'ترکیب قدرت هوش مصنوعی با تخصص روانشناسان کودک برای تجربه فرزندپروری بهتر'
		},
		features: [
			{
				icon: 'chat-bubble-left-ellipsis',
				title: 'دستیار هوش مصنوعی ۲۴/۷',
				description: 'پاسخ فوری به سوالات فرزندپروری، نکات سنی، و پیشنهادات شخصی‌سازی شده',
				highlights: ['پاسخ در کمتر از ۳۰ ثانیه', 'بیش از ۱۰۰۰ موضوع فرزندپروری', 'محتوای بومی ایرانی']
			},
			{
				icon: 'chart-pie',
				title: 'غربالگری و ردیابی پیشرفته',
				description: 'ابزارهای علمی برای نظارت بر رشد و تشخیص زودهنگام مشکلات',
				highlights: ['پرسشنامه‌های استاندارد (SCARED، PHQ-2)', 'گزارش‌های تصویری پیشرفت', 'هشدارهای هوشمند']
			},
			{
				icon: 'user-group',
				title: 'نظارت روانشناس متخصص',
				description: 'روانشناسان کودک مجرب، برنامه‌های شخصی و مشاوره آنلاین',
				highlights: ['جلسات آنلاین ۱۵-۳۰ دقیقه‌ای', 'برنامه‌های ۲ هفته‌ای هدفمند', 'ارجاع به متخصصان']
			},
			{
				icon: 'book',
				title: 'کتابخانه آموزشی جامع',
				description: 'مقالات، ویدئوها، پادکست‌ها و فعالیت‌های متناسب با سن فرزند',
				highlights: ['بیش از ۵۰۰ محتوای آموزشی', 'فعالیت‌های تعاملی', 'داستان‌ها و بازی‌های آموزشی']
			},
			{
				icon: 'shield-check',
				title: 'حریم خصوصی و امنیت',
				description: 'حفاظت کامل از اطلاعات شخصی با بالاترین استانداردهای امنیتی',
				highlights: ['رمزگذاری پیشرفته', 'سرورهای محلی', 'کنترل کامل روی داده‌ها']
			},
			{
				icon: 'globe',
				title: 'محتوای فرهنگی بومی',
				description: 'راهکارها و مثال‌های متناسب با فرهنگ و شرایط ایرانی',
				highlights: ['متناسب با فرهنگ ایرانی', 'شرایط اجتماعی محلی', 'زبان ساده و قابل فهم']
			}
		],
		stats: {
			title: 'آمار موفقیت هم‌پای مادر',
			items: [
				{ number: '۹۵٪', label: 'رضایت مادران' },
				{ number: '۱۰۰۰+', label: 'خانواده فعال' },
				{ number: '۲۴/۷', label: 'پشتیبانی آنلاین' },
				{ number: '۳۰ثانیه', label: 'زمان پاسخ AI' }
			]
		}
	},
	en: {
		seo: {
			title: 'MamaTogether | AI + Human Psychology Features for Mothers',
			description: 'Discover how MamaTogether combines 24/7 AI guidance with child psychologist oversight to support mothers in daily parenting challenges.'
		},
		hero: {
			title: '<strong>Smart</strong> Features for Modern Mothers',
			text: 'Combining the power of AI with child psychology expertise for a better parenting experience'
		},
		features: [
			{
				icon: 'chat-bubble-left-ellipsis',
				title: '24/7 AI Assistant',
				description: 'Instant answers to parenting questions, age-appropriate tips, and personalized suggestions',
				highlights: ['Response in under 30 seconds', '1000+ parenting topics', 'Iranian-localized content']
			},
			{
				icon: 'chart-pie',
				title: 'Advanced Screening & Tracking',
				description: 'Scientific tools for monitoring development and early problem detection',
				highlights: ['Standard questionnaires (SCARED, PHQ-2)', 'Visual progress reports', 'Smart alerts']
			},
			{
				icon: 'user-group',
				title: 'Expert Psychologist Oversight',
				description: 'Experienced child psychologists, personalized plans, and online consultations',
				highlights: ['15-30 minute online sessions', 'Targeted 2-week programs', 'Specialist referrals']
			},
			{
				icon: 'book',
				title: 'Comprehensive Education Library',
				description: 'Articles, videos, podcasts, and age-appropriate activities for your child',
				highlights: ['500+ educational content pieces', 'Interactive activities', 'Educational stories and games']
			},
			{
				icon: 'shield-check',
				title: 'Privacy & Security',
				description: 'Complete protection of personal information with highest security standards',
				highlights: ['Advanced encryption', 'Local servers', 'Full data control']
			},
			{
				icon: 'globe',
				title: 'Culturally Local Content',
				description: 'Solutions and examples tailored to Iranian culture and conditions',
				highlights: ['Iranian culture-appropriate', 'Local social conditions', 'Simple, understandable language']
			}
		],
		stats: {
			title: 'MamaTogether Success Metrics',
			items: [
				{ number: '95%', label: 'Mother Satisfaction' },
				{ number: '1000+', label: 'Active Families' },
				{ number: '24/7', label: 'Online Support' },
				{ number: '30sec', label: 'AI Response Time' }
			]
		}
	}
}

const currentContent = content[lang as keyof typeof content] || content.en

export async function getStaticPaths() {
	return [
		{ params: { lang: 'en' } },
		{ params: { lang: 'fa' } }
	]
}
---

<Layout title={currentContent.seo.title} description={currentContent.seo.description} lang={lang}>
	<!-- Hero Section -->
	<Hero title={currentContent.hero.title} text={currentContent.hero.text} />
	
	<!-- Features Grid Section -->
	<Section classes="!py-24">
		<Row>
			<Col classes="col-span-12">
				<div class="features-grid">
					{currentContent.features.map((feature, index) => (
						<div class={`feature-card feature-card--${index + 1}`} data-aos="fade-up" data-aos-delay={index * 100}>
							<div class="feature-card__icon">
								<Icon name={feature.icon} />
							</div>
							<div class="feature-card__content">
								<h3>{feature.title}</h3>
								<p>{feature.description}</p>
								<ul class="feature-highlights">
									{feature.highlights.map(highlight => (
										<li>
											<Icon name="check-circle" />
											<span>{highlight}</span>
										</li>
									))}
								</ul>
							</div>
						</div>
					))}
				</div>
			</Col>
		</Row>
	</Section>

	<!-- Stats Section -->
	<Section classes="bg-gradient-to-r from-primary-500 to-primary-600 !py-24">
		<Row>
			<Col classes="col-span-12 text-center">
				<h2 class="text-4xl font-bold text-white mb-16">{currentContent.stats.title}</h2>
				<div class="stats-grid">
					{currentContent.stats.items.map((stat, index) => (
						<div class="stat-item" data-aos="zoom-in" data-aos-delay={index * 150}>
							<div class="stat-number" data-counter={stat.number}>{stat.number}</div>
							<div class="stat-label">{stat.label}</div>
						</div>
					))}
				</div>
			</Col>
		</Row>
	</Section>

	<!-- Interactive Demo Section -->
	<Section classes="!py-24 bg-neutral-50 dark:bg-neutral-900">
		<Row>
			<Col classes="col-span-12 lg:col-span-6">
				<div class="demo-content">
					<h2 class="text-3xl font-bold mb-6">
						{lang === 'fa' ? 'تجربه تعاملی هم‌پای مادر' : 'Interactive MamaTogether Experience'}
					</h2>
					<p class="text-lg mb-8">
						{lang === 'fa' 
							? 'با کلیک روی هر بخش، عملکرد واقعی سیستم را مشاهده کنید' 
							: 'Click on each section to see the real system functionality'
						}
					</p>
					<div class="demo-buttons">
						<button class="demo-btn demo-btn--ai" data-demo="ai">
							<Icon name="bolt" />
							{lang === 'fa' ? 'تست هوش مصنوعی' : 'Test AI'}
						</button>
						<button class="demo-btn demo-btn--psychologist" data-demo="psychologist">
							<Icon name="user" />
							{lang === 'fa' ? 'مشاوره روانشناس' : 'Psychologist Chat'}
						</button>
						<button class="demo-btn demo-btn--tracking" data-demo="tracking">
							<Icon name="chart-pie" />
							{lang === 'fa' ? 'ردیابی پیشرفت' : 'Progress Tracking'}
						</button>
					</div>
				</div>
			</Col>
			<Col classes="col-span-12 lg:col-span-6">
				<div class="demo-showcase">
					<div class="demo-phone">
						<div class="demo-screen" id="demo-screen">
							<div class="demo-content-ai">
								<div class="chat-message">
									{lang === 'fa' ? '👋 سلام! چطور می‌تونم کمکتون کنم؟' : '👋 Hi! How can I help you today?'}
								</div>
							</div>
						</div>
					</div>
				</div>
			</Col>
		</Row>
	</Section>

	<!-- CTA Section -->
	<CTA lang={lang} />
</Layout>

<style>
	/* Features Grid */
	.features-grid {
		@apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8;
	}

	.feature-card {
		@apply bg-white dark:bg-neutral-800 rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-100 dark:border-neutral-700;
		transform: translateY(0);
	}

	.feature-card:hover {
		transform: translateY(-8px);
	}

	.feature-card__icon {
		@apply w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-xl flex items-center justify-center mb-6;
	}

	.feature-card__icon svg {
		@apply w-8 h-8 text-primary-600 dark:text-primary-400;
	}

	.feature-card h3 {
		@apply text-xl font-bold text-neutral-800 dark:text-neutral-100 mb-4;
	}

	.feature-card p {
		@apply text-neutral-600 dark:text-neutral-300 mb-6 leading-relaxed;
	}

	.feature-highlights {
		@apply space-y-3;
	}

	.feature-highlights li {
		@apply flex items-center text-sm text-neutral-700 dark:text-neutral-300;
	}

	.feature-highlights svg {
		@apply w-4 h-4 text-green-500 mr-3 flex-shrink-0;
	}

	/* Stats Grid */
	.stats-grid {
		@apply grid grid-cols-2 lg:grid-cols-4 gap-8;
	}

	.stat-item {
		@apply text-center;
	}

	.stat-number {
		@apply text-4xl lg:text-5xl font-bold text-white mb-2;
	}

	.stat-label {
		@apply text-primary-100 text-lg;
	}

	/* Demo Section */
	.demo-buttons {
		@apply flex flex-wrap gap-4;
	}

	.demo-btn {
		@apply flex items-center gap-3 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors duration-200;
	}

	.demo-btn svg {
		@apply w-5 h-5;
	}

	.demo-showcase {
		@apply flex justify-center items-center;
	}

	.demo-phone {
		@apply w-80 h-96 bg-neutral-800 rounded-3xl p-6 shadow-2xl;
	}

	.demo-screen {
		@apply w-full h-full bg-white dark:bg-neutral-900 rounded-2xl p-6 overflow-hidden;
	}

	.chat-message {
		@apply bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 p-4 rounded-lg text-sm;
	}

	/* Animations */
	@keyframes float {
		0%, 100% { transform: translateY(0px); }
		50% { transform: translateY(-10px); }
	}

	.feature-card--1 { animation: float 6s ease-in-out infinite; }
	.feature-card--2 { animation: float 6s ease-in-out infinite 1s; }
	.feature-card--3 { animation: float 6s ease-in-out infinite 2s; }
	.feature-card--4 { animation: float 6s ease-in-out infinite 3s; }
	.feature-card--5 { animation: float 6s ease-in-out infinite 4s; }
	.feature-card--6 { animation: float 6s ease-in-out infinite 5s; }
</style>

<script>
	// Interactive demo functionality
	document.addEventListener('DOMContentLoaded', function() {
		const demoButtons = document.querySelectorAll('.demo-btn');
		const demoScreen = document.getElementById('demo-screen');
		
		// Define the type for our demo content
		interface DemoContent {
			[key: string]: {
				[key: string]: string;
			};
		}
		
		const demoContent: DemoContent = {
			ai: {
				fa: '<div class="chat-message">👋 سلام! چطور می‌تونم کمکتون کنم؟</div><div class="chat-message mt-4 bg-gray-100">فرزند ۳ ساله‌ام غذا نمی‌خوره</div><div class="chat-message mt-4">💡 راهکارهای مفید: ۱) غذا رو به شکل بازی درآرید ۲) با فرزندتون همزمان غذا بخورید ۳) از تشویق مثبت استفاده کنید</div>',
				en: '<div class="chat-message">👋 Hi! How can I help you today?</div><div class="chat-message mt-4 bg-gray-100">My 3-year-old won\'t eat</div><div class="chat-message mt-4">💡 Helpful solutions: 1) Turn meals into games 2) Eat together with your child 3) Use positive reinforcement</div>'
			},
			psychologist: {
				fa: '<div class="video-call"><div class="avatar">👩‍⚕️</div><div class="call-info">دکتر زهرا احمدی<br>روانشناس کودک<br>🟢 آنلاین</div></div>',
				en: '<div class="video-call"><div class="avatar">👩‍⚕️</div><div class="call-info">Dr. Sarah Johnson<br>Child Psychologist<br>🟢 Online</div></div>'
			},
			tracking: {
				fa: '<div class="progress-chart"><div class="chart-title">پیشرفت این هفته</div><div class="progress-bar"><div class="progress-fill" style="width: 75%"></div></div><div class="stats">😊 روز خوب: ۵<br>😐 روز معمولی: ۲<br>😔 روز سخت: ۰</div></div>',
				en: '<div class="progress-chart"><div class="chart-title">This Week\'s Progress</div><div class="progress-bar"><div class="progress-fill" style="width: 75%"></div></div><div class="stats">😊 Good days: 5<br>😐 Normal days: 2<br>😔 Difficult days: 0</div></div>'
			}
		};
		
		demoButtons.forEach(button => {
			button.addEventListener('click', function(this: HTMLElement) {
				const demo = this.dataset.demo;
				const lang = document.documentElement.lang || 'en';
				if (demoScreen && demo && demoContent[demo]) {
					demoScreen.innerHTML = demoContent[demo][lang];
				}
			});
		});
	});
</script>