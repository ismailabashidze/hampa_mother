---
// Highlights Section
// ------------
// Description: A section with a multiple text and image rows.

// Components
// - UI
import TextImage from '../basic/TextImage.astro'

// Content
import highlight01 from '../../../assets/highlights/highlight-01.svg'
import highlight01mobile from '../../../assets/highlights/highlight-01-mobile.svg'
import highlight02 from '../../../assets/highlights/highlight-02.svg'
import highlight02mobile from '../../../assets/highlights/highlight-02-mobile.svg'
import highlight03 from '../../../assets/highlights/highlight-03.svg'
import highlight03mobile from '../../../assets/highlights/highlight-03-mobile.svg'
import highlight04 from '../../../assets/highlights/highlight-04.svg'
import highlight04mobile from '../../../assets/highlights/highlight-04-mobile.svg'

// Language support
import { getLanguageFromUrl } from '../../../config/i18n'

// Props
export interface Props {
	lang?: string
}

const { lang } = Astro.props
const currentLang = lang || getLanguageFromUrl(Astro.url.pathname)

type HighlightBlock = {
	title: string
	text: string
	image: any
	mobileImage?: any
	imageWidth: number
	imageHeight: number
	imagePosition: 'left' | 'right'
}

// Language-specific content
const content = {
	fa: {
		highlights: [
			{
				title: '<strong>وضوح</strong> روزانه فرزندپروری',
				text: 'پاسخ‌های سریع و قابل اعتماد برای غذا، خواب، قشقرق و روتین‌ها دریافت کنید. دیگر نیازی به جست‌وجو نیست—راهنمایی عملی در دقایق.',
			},
			{
				title: '<strong>غربالگری</strong> اولیه و ردیابی',
				text: 'چک‌لیست‌های ساده و ثبت دیجیتال به شما و روانشناس ناظر کمک می‌کند تا خطرات را زود تشخیص دهید و پیشرفت را در طول زمان ببینید.',
			},
			{
				title: 'محتوای <strong>محلی</strong> برای ایران',
				text: 'مشاوره، داستان‌ها، بازی‌ها و مثال‌هایی متناسب با فرهنگ ایرانی و گروه‌های سنی، با گام‌های عملی که امروز می‌توانید انجام دهید.',
			},
			{
				title: 'حریم خصوصی و <strong>مقرون‌به‌صرفه</strong> بودن',
				text: 'طراحی شده با رعایت حریم خصوصی و قیمت‌گذاری منصفانه: سطح رایگان برای مبانی، سطوح پولی برای هوش مصنوعی عمیق‌تر و جلسات آنلاین کوتاه در صورت نیاز.',
			}
		]
	},
	en: {
		highlights: [
			{
				title: 'Daily parenting <strong>clarity</strong>',
				text: 'Get quick, trustworthy answers for meals, sleep, tantrums, and routines. No more scrolling—actionable guidance in minutes.',
			},
			{
				title: 'Early <strong>screening</strong> & tracking',
				text: 'Simple checklists and a digital log help you and the supervising psychologist spot risks early and see progress over time.',
			},
			{
				title: '<strong>Local</strong> content for Iran',
				text: 'Advice, stories, games, and examples tuned for Iranian culture and age bands, with practical steps you can do today.',
			},
			{
				title: 'Privacy & <strong>affordability</strong>',
				text: 'Private by design with fair pricing: free tier for basics, paid tiers for deeper AI and short online sessions when needed.',
			}
		]
	}
}

const currentContent = content[currentLang as keyof typeof content] || content.en

const highlightBlocks: HighlightBlock[] = [
	{
		...currentContent.highlights[0],
		image: highlight01,
		imageWidth: highlight01.width,
		imageHeight: highlight01.height,
		mobileImage: highlight01mobile,
		imagePosition: 'right'
	},
	{
		...currentContent.highlights[1],
		image: highlight02,
		mobileImage: highlight02mobile,
		imageWidth: highlight02.width,
		imageHeight: highlight02.height,
		imagePosition: 'left'
	},
	{
		...currentContent.highlights[2],
		image: highlight03,
		mobileImage: highlight03mobile,
		imageWidth: highlight03.width,
		imageHeight: highlight03.height,
		imagePosition: 'right'
	},
	{
		...currentContent.highlights[3],
		image: highlight04,
		mobileImage: highlight04mobile,
		imageWidth: highlight04.width,
		imageHeight: highlight04.height,
		imagePosition: 'left'
	}
]
---

{
	highlightBlocks.map((highlight, key) => (
		<TextImage
			id={`highlight-${key}`}
			title={highlight.title}
			text={highlight.text}
			image={highlight.image}
			imageWidth={highlight.imageWidth}
			imageHeight={highlight.imageHeight}
			mobileImage={highlight.mobileImage}
			imagePosition={highlight.imagePosition}
			classes={key === 0 ? '!pb-0' : key === highlightBlocks.length - 1 ? '!pt-0' : '!py-0'}
		/>
	))
}
