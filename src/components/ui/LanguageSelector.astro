---
// Language Selector Component
// ------------
// Description: A dropdown component for language selection with flags.

import { languages, getLanguageFromUrl, addLanguageToUrl } from '../../config/i18n'

// Get current language from URL
const currentLanguage = getLanguageFromUrl(Astro.url.pathname)

// Generate language switch URLs
const languageUrls = languages.map(lang => ({
	...lang,
	url: addLanguageToUrl(Astro.url.pathname, lang.code)
}))
---

<div class="relative inline-block text-left">
  <div class="flex space-x-2">
    {
      languageUrls.map((lang) => (
        <a
          href={lang.url}
          class={`inline-flex items-center justify-center rounded-md border shadow-sm px-3 py-2 text-sm font-medium cursor-pointer select-none transition-colors ${
            lang.code === currentLanguage
              ? 'bg-primary-500 border-primary-500 text-white'
              : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700'
          }`}
        >
          <span class="flag mr-1">{lang.code.toUpperCase()}</span>
          <span>{lang.nativeName}</span>
        </a>
      ))
    }
  </div>
</div>

<style>
  .flag { @apply font-bold text-sm; }
</style>